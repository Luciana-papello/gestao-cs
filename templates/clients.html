{% extends "base.html" %}

{% block title %}Gestão de Clientes - Dashboard Papello{% endblock %}

{% block extra_head %}
<style>

    /* NOVAS CLASSES DE COR PARA O NÍVEL DO CLIENTE */
    .text-nivel-premium { color: #8b5cf6 !important; font-weight: 600; }
    .text-nivel-gold { color: #f59e0b !important; font-weight: 600; }
    .text-nivel-silver { color: #6b7280 !important; font-weight: 600; }
    .text-nivel-bronze { color: #dc2626 !important; font-weight: 600; }

    .client-card {
        transition: all 0.2s ease-in-out;
        border-left-width: 4px;
    }
    .client-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    .client-card .card-body {
        padding: 1rem 1.25rem;
    }
    .client-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 0.5rem 1.5rem;
    }
    .client-info-item {
        font-size: 0.9rem;
    }
    .client-info-item i {
        margin-right: 8px;
        color: #6c757d;
        width: 16px;
        text-align: center;
    }
    .priority-score {
        font-size: 1.2rem;
        font-weight: 700;
    }
    .filters-container {
        background-color: #fff;
        padding: 1.5rem;
        border-radius: 0.5rem;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="page-header">
        <div class="container">
            <h1><i class="fas fa-users-cog me-3"></i>Gestão de Clientes</h1>
            <p>Análise, filtragem e segmentação da base de clientes Papello</p>
        </div>
    </div>

    <div class="container">
        <div class="filters-container mb-4">
            <div class="row g-3 align-items-end">
                <div class="col-lg-3 col-md-6">
                    <label for="search-client" class="form-label fw-bold">Buscar por Nome ou Email</label>
                    <input type="text" id="search-client" class="form-control" placeholder="Digite para buscar...">
                </div>
                <div class="col-lg-3 col-md-6">
                    <label for="filter-nivel" class="form-label fw-bold">Nível</label>
                    <select id="filter-nivel" class="form-select" multiple="multiple"></select>
                </div>
                <div class="col-lg-2 col-md-4">
                    <label for="filter-status" class="form-label fw-bold">Status</label>
                    <select id="filter-status" class="form-select" multiple="multiple"></select>
                </div>
                <div class="col-lg-1 col-md-2">
                    <label for="filter-receita-min" class="form-label fw-bold">Receita Mín.</label>
                    <input type="number" id="filter-receita-min" class="form-control" placeholder="R$">
                </div>
                <div class="col-lg-1 col-md-2">
                    <label for="filter-receita-max" class="form-label fw-bold">Receita Máx.</label>
                    <input type="number" id="filter-receita-max" class="form-control" placeholder="R$">
                </div>
                <div class="col-lg-2 col-md-4">
                    <label for="items-per-page" class="form-label fw-bold">Itens por pág.</label>
                    <select id="items-per-page" class="form-select">
                        <option value="10" selected>10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div id="pagination-info" class="text-muted">Carregando...</div>
            <nav id="pagination-controls" aria-label="Navegação de clientes">
                </nav>
        </div>
        <div class="mb-3 text-end">
            <button id="export-clients-btn" class="btn btn-success">
                <i class="fas fa-file-excel me-2"></i> Exportar Seleção (.csv)
            </button>
        </div>
        <div id="client-list-container">
            <div class="text-center p-5">
                <div class="spinner-border text-success" style="width: 3rem; height: 3rem;" role="status">
                    <span class="visually-hidden">Carregando clientes...</span>
                </div>
                <p class="mt-3">Carregando clientes...</p>
            </div>
        </div>

         <div class="d-flex justify-content-center align-items-center mt-4">
            <nav id="pagination-controls-bottom" aria-label="Navegação de clientes">
                </nav>
        </div>

    </div>
</div>
{% endblock %}

{% block page_init %}
if (typeof loadClientsPage === 'function') {
    loadClientsPage();
}
{% endblock %}